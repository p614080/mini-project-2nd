<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="login_container">
        <h2>ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</h2>
        <div class="password_container">
            <input type="password" id="register_password" placeholder="ë¹„ë°€ë²ˆí˜¸ (ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ 8ìë¦¬ ì´ìƒ)" required>
            <span class="password_toggle" onclick="togglePassword('register_password', this)">ğŸ‘ï¸</span>
        </div>
        <div class="password_container">
            <input type="password" id="confirm_password" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required>
            <span class="password_toggle" onclick="togglePassword('confirm_password', this)">ğŸ‘ï¸</span>
        </div>
        <button id="register_button" onclick="redirectToTerms()">ì¬ì„¤ì • ì™„ë£Œ</button>
        <p class="error_message" id="register_error"></p>
        <div class="login_bottom_bar">
            <button id="termstoregist_button" onclick="location.href='../main/home.html'">í™ˆìœ¼ë¡œ</button>
        </div>
    </div>

    <script>
        // Clear previous error message
        errorMessage.textContent = '';
        
        function togglePassword(fieldId, toggleIcon) {
            const passwordField = document.getElementById(fieldId);
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordField.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        async function redirectToTerms() {
            const password = document.getElementById('register_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            const errorMessage = document.getElementById('register_error');
            const emailCriteria = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const passwordCriteria = /^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

            if (!password || !confirmPassword) {
                errorMessage.textContent = 'ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
                errorMessage.style.color = 'red';
                return;
            }

            if (!passwordCriteria.test(password)) {
                errorMessage.textContent = 'ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ì—¬ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
                errorMessage.style.color = 'red';
                return;
            }

            if (password !== confirmPassword) {
                errorMessage.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                errorMessage.style.color = 'red';
                return;
            }
            // ì•½ê´€ ë™ì˜ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
            alert('ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
            window.location.href = 'login.html';
        }

        function verifyPhone() {
            alert('íœ´ëŒ€í° ë³¸ì¸ ì¸ì¦ API í˜¸ì¶œ');
        }

        function moveFocus(currentField, nextFieldId) {
            if (currentField.value.length >= currentField.maxLength) {
                document.getElementById(nextFieldId).focus();
            }
        }

    </script>
</body>
</html>
