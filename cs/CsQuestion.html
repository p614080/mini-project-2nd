<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>질문QnA</title>
    <link rel="stylesheet" href="../css/cs/CsQuestion.css">
    <!-- <script src="../js/cs/CsQuestion.js"></script> -->
    <iframe src="../main/Header.html" style="width: 100%; border:none;" scrolling="no"></iframe>
</head>
<body>
    <div class="body_div">
        <div class="menu_div">
            <a href="./CsQuestion.html">질문QnA</a>
            <input type="search" id="search" placeholder="내용을 입력하세요">
            <input type="button" id="button" value="검색" onclick="checkSearch()">
        </div>

        <div class="table_div">
            <table>
                <tr>
                    <td>번호</td>
                    <td>제목</td>
                    <td>등록일</td>
                    <td>작성자</td>
                    <td>조회수</td>
                </tr>
                <tbody id="tableBody">
                </tr>
            </table>
        </div>
        <div class="page_div">
            <a href="">1</a>
            <a href="">2</a>
            <a href="">3</a>
            <a href="">4</a>
            <a href="">5</a>
        </div>
        <div>
            <input type="button" id="writing" value="글쓰기" onclick="location.href='CsWriting.html';">
        </div>
    </div>

    <script>
        function checkSearch() {
            if (document.getElementById('search').value == "") {
                alert("내용을 입력하세요");
            }
        }


        let xhttp = new XMLHttpRequest();
            xhttp.open("GET", "../json/cs/CsQuestion.json", true);
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                  let storage = JSON.parse(this.response);
                  for (let i = 0; i < storage.length; i++) {
                    let tr = document.createElement("tr");


                    // JSON 데이터의 num 필드 값으로 td를 생성하고 tr에 추가
                    let tdNum = document.createElement("td");
                    tdNum.innerHTML = storage[i].num;
                    tr.appendChild(tdNum);

                    // JSON 데이터의 title 필드 값으로 td를 생성하고 tr에 추가
                    let tdTitle = document.createElement("td");
                    tdTitle.innerHTML = storage[i].title;

                    tdTitle.addEventListener("click", function() {
                        let url = `CsQuestionDetail.html?num=${storage[i].num}`;
                        window.location.href = url;
                    });
                    tr.appendChild(tdTitle);

                    // JSON 데이터의 CreatedDay 필드 값으로 td를 생성하고 tr에 추가
                    let tdCreatedDay = document.createElement("td");
                    tdCreatedDay.innerHTML = storage[i].CreatedDay;
                    tr.appendChild(tdCreatedDay);

                    // JSON 데이터의 member 필드 값으로 td를 생성하고 tr에 추가
                    let tdMember = document.createElement("td");
                    tdMember.innerHTML = storage[i].member;
                    tr.appendChild(tdMember);

                    // JSON 데이터의 Views 필드 값으로 td를 생성하고 tr에 추가
                    let tdViews = document.createElement("td");
                    tdViews.innerHTML = storage[i].Views;
                    tr.appendChild(tdViews);

                    document.querySelector("tbody").appendChild(tr);
            }
        }
    };
        xhttp.send();
    </script>
</body>
<iframe src="../main/Footer.html" style="width: 100%;" frameborder="0"></iframe>
</html>